{% extends "base.html" %}
{% load allauth i18n %}
{% block head_title %}
  {% trans "Sign Up" %}
{% endblock head_title %}

{% block content %}
<div class="container my-5">
  <h1 class="mb-4">{% trans "Sign Up" %}</h1>
  <p class="mb-4">
    {% trans "Already have an account?" %} 
    <a href="{{ login_url }}">{% trans "Sign in" %}</a>
  </p>
  {% url 'account_signup' as action_url %}
  <form method="post" action="{{ action_url }}">
    {% csrf_token %}

    <div class="form-group">
      {{ form.username.label_tag }}
      {{ form.username }}
      <small class="form-text text-muted">{{ form.username.help_text }}</small>
    </div>

    <div class="form-group">
      {{ form.email.label_tag }}
      {{ form.email }}
      <small class="form-text text-muted">{{ form.email.help_text }}</small>
    </div>

    <div class="form-group">
      {{ form.password1.label_tag }}
      
      <!-- Ensure Help Text ID Exists -->
      <div id="id_password1_helptext" class="helptext">
          {{ form.password1.help_text }}
      </div>

      <input type="password" name="password1" placeholder="Password" 
             autocomplete="new-password" required aria-describedby="id_password1_helptext" 
             id="id_password1">
    </div>

    <div class="form-group">
      {{ form.password2.label_tag }}
      {{ form.password2 }}
      <small class="form-text text-muted">{{ form.password2.help_text }}</small>
    </div>

    {{ redirect_field }}
    <button type="submit" class="btn btn-primary">{% trans "Sign Up" %}</button>
  </form>

  {% if PASSKEY_SIGNUP_ENABLED %}
    <hr>
    <a href="{{ signup_by_passkey_url }}" class="btn btn-outline-primary">
      {% trans "Sign up using a passkey" %}
    </a>
  {% endif %}
  
  {% if SOCIALACCOUNT_ENABLED %}
    {% include "socialaccount/snippets/login.html" with page_layout="entrance" %}
  {% endif %}
</div>
{% endblock content %}
